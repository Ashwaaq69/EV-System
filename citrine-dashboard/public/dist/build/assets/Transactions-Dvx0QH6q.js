import{r as y,k as g,l as a,H as e,q as n,s,L as l,U as $,X as C,j as u,M as b,N as S,O as j,P as o,R as L,B as N,Y as m}from"./app-l2WQALlO.js";import{e as V,h as A,j as B,k as D,m as M,l as P,_,n as T}from"./CardTitle-BiHydENz.js";import{f as z,_ as F,a as R,b as p,c as f,d as U,e as c,C as E,g as O}from"./index-CTPInAjE.js";const q=V("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),H={class:"p-8 max-w-7xl mx-auto space-y-8"},I={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},W={class:"flex items-center gap-2"},X={class:"flex items-center gap-2"},Y={class:"rounded-md border border-zinc-100 dark:border-zinc-800"},G={class:"flex items-center gap-3"},J={class:"h-8 w-8 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-xs font-bold text-zinc-500"},K={class:"text-zinc-900 dark:text-zinc-100 text-sm"},Q={class:"flex flex-col"},Z={class:"text-sm font-semibold text-zinc-900 dark:text-zinc-100"},tt={class:"text-[10px] text-zinc-500 uppercase tracking-tight"},et={class:"flex items-center gap-2"},st={class:"flex flex-col"},at={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100"},nt={class:"text-[10px] font-bold text-green-600"},it={key:1,class:"text-[10px] text-zinc-400 italic"},lt={class:"mt-6 flex items-center justify-between"},ot={class:"text-[10px] font-bold uppercase tracking-widest text-zinc-400"},rt={class:"flex items-center gap-4"},dt={class:"text-xs text-zinc-500"},ct={class:"flex gap-2"},_t={__name:"Transactions",props:{sessions:Object},setup(r){const x=y(r.sessions.per_page),k=d=>d?new Date(d).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",h=()=>{m.get("/transactions",{per_page:x.value},{preserveState:!0})},v=d=>{d&&m.get(d,{per_page:x.value},{preserveState:!0})},w=d=>{confirm("Are you sure you want to stop this charging session?")&&m.post(`/transactions/${d}/stop`)};return(d,t)=>(u(),g(T,null,{default:a(()=>[e("div",H,[e("header",I,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-3xl font-bold tracking-tight text-zinc-900 dark:text-white"},"Transaction Control"),e("p",{class:"text-zinc-500 dark:text-zinc-400"},"Monitor and manage real-time charging sessions")],-1)),e("div",W,[n(s(z),{variant:"outline",class:"px-3 py-1 gap-2 border-zinc-200 text-zinc-600 dark:border-zinc-800 dark:text-zinc-400"},{default:a(()=>[...t[3]||(t[3]=[e("span",{class:"relative flex h-2 w-2"},[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})],-1),l(" System Live ",-1)])]),_:1})])]),n(s(A),{class:"border-none shadow-sm shadow-zinc-200 dark:shadow-none bg-white dark:bg-zinc-900"},{default:a(()=>[n(s(B),{class:"flex flex-row items-center justify-between pb-4"},{default:a(()=>[e("div",null,[n(s(D),null,{default:a(()=>[...t[5]||(t[5]=[l("Charging Sessions",-1)])]),_:1}),n(s(M),null,{default:a(()=>[...t[6]||(t[6]=[l("Comprehensive log of user interactions",-1)])]),_:1})]),e("div",X,[t[8]||(t[8]=e("label",{class:"text-xs text-zinc-500 uppercase font-bold tracking-tighter"},"View",-1)),$(e("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>x.value=i),onChange:h,class:"rounded-md border-zinc-200 py-1 text-xs dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-300 focus:ring-[#FF2D20]"},[...t[7]||(t[7]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:25},"25",-1)])],544),[[C,x.value]])])]),_:1}),n(s(P),null,{default:a(()=>[e("div",Y,[n(s(F),null,{default:a(()=>[n(s(R),{class:"bg-zinc-50/50 dark:bg-zinc-800/50"},{default:a(()=>[n(s(p),null,{default:a(()=>[n(s(f),{class:"w-[180px]"},{default:a(()=>[...t[9]||(t[9]=[l("User",-1)])]),_:1}),n(s(f),null,{default:a(()=>[...t[10]||(t[10]=[l("Charger / Location",-1)])]),_:1}),n(s(f),null,{default:a(()=>[...t[11]||(t[11]=[l("Status",-1)])]),_:1}),n(s(f),null,{default:a(()=>[...t[12]||(t[12]=[l("Timeline",-1)])]),_:1}),n(s(f),null,{default:a(()=>[...t[13]||(t[13]=[l("Energy / Cost",-1)])]),_:1}),n(s(f),{class:"text-right"},{default:a(()=>[...t[14]||(t[14]=[l("Action",-1)])]),_:1})]),_:1})]),_:1}),n(s(U),null,{default:a(()=>[(u(!0),b(S,null,j(r.sessions.data,i=>(u(),g(s(p),{key:i.id,class:"group hover:bg-zinc-50/50 dark:hover:bg-zinc-800/50"},{default:a(()=>[n(s(c),{class:"font-medium"},{default:a(()=>[e("div",G,[e("div",J,o(i.user?.charAt(0)),1),e("span",K,o(i.user),1)])]),_:2},1024),n(s(c),null,{default:a(()=>[e("div",Q,[e("span",Z,o(i.charger),1),e("span",tt,o(i.location),1)])]),_:2},1024),n(s(c),null,{default:a(()=>[n(s(z),{variant:i.status==="active"?"default":"outline",class:L(i.status==="active"?"bg-green-500/10 text-green-600 border-green-200 hover:bg-green-500/10":"text-zinc-500 border-zinc-200")},{default:a(()=>[l(o(i.status),1)]),_:2},1032,["variant","class"])]),_:2},1024),n(s(c),{class:"text-zinc-500 text-xs"},{default:a(()=>[e("div",et,[n(s(q),{class:"h-3 w-3"}),l(" "+o(k(i.start_time)),1)])]),_:2},1024),n(s(c),null,{default:a(()=>[e("div",st,[e("span",at,[l(o(i.kwh)+" ",1),t[15]||(t[15]=e("span",{class:"text-[10px] text-zinc-400"},"kWh",-1))]),e("span",nt,"RM "+o(i.cost),1)])]),_:2},1024),n(s(c),{class:"text-right"},{default:a(()=>[i.status==="active"?(u(),g(s(_),{key:0,variant:"destructive",size:"sm",onClick:ft=>w(i.id),class:"h-8 text-xs bg-red-50 text-red-600 border-red-100 hover:bg-red-600 hover:text-white transition-all"},{default:a(()=>[...t[16]||(t[16]=[l(" Stop ",-1)])]),_:1},8,["onClick"])):(u(),b("span",it,"Archived"))]),_:2},1024)]),_:2},1024))),128)),r.sessions.data.length===0?(u(),g(s(p),{key:0},{default:a(()=>[n(s(c),{colspan:"6",class:"h-24 text-center text-zinc-500"},{default:a(()=>[...t[17]||(t[17]=[l(" No transactions recorded. ",-1)])]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1})]),e("div",lt,[e("p",ot," Showing "+o(r.sessions.from)+"-"+o(r.sessions.to)+" of "+o(r.sessions.total),1),e("div",rt,[e("span",dt,"Page "+o(r.sessions.current_page),1),e("div",ct,[n(s(_),{variant:"outline",size:"icon",class:"h-8 w-8",onClick:t[1]||(t[1]=i=>v(r.sessions.prev_page_url)),disabled:!r.sessions.prev_page_url},{default:a(()=>[n(s(E),{class:"h-4 w-4"})]),_:1},8,["disabled"]),n(s(_),{variant:"outline",size:"icon",class:"h-8 w-8",onClick:t[2]||(t[2]=i=>v(r.sessions.next_page_url)),disabled:!r.sessions.next_page_url},{default:a(()=>[n(s(O),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]),_:1})]),_:1})])]),_:1}))}};export{_t as default};
